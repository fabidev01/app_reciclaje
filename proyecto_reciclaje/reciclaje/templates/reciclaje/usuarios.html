{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usuarios</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
</head>
<body class="dashboard-body">
  <header class="dashboard-header">
    <h1>Gestión de Usuarios</h1>
    <nav class="nav-admin">
      <a href="{% url 'admin_panel' %}">Inicio</a>
      <a href="{% url 'admin_usuarios' %}">Usuarios</a>
      <a href="{% url 'admin_registros' %}">Registros</a>
      <a href="{% url 'admin_catalogo' %}">Catálogo</a>
      <a href="{% url 'admin_historial' %}">Historial</a>
      <select name="lista-bitacora-menu" id="lista-bitacora-menu" onchange="redirigirBitacora(this.value)">
        <option value="#">Bitácoras</option>
        <option value="{% url 'bitacora_reciclaje' %}">Reciclaje</option>
        <option value="{% url 'bitacora_catalogo' %}">Catálogo</option>
        <option value="{% url 'bitacora_canje' %}">Canje</option>
      </select>
      <a href="{% url 'logout' %}">Cerrar Sesión</a>
    </nav>
  </header>

  <main class="tabla-usuarios">
    {% if messages %}
      {% for message in messages %}
        <div class="error-message {{ message.tags }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Correo</th>
          <th>Teléfono</th>
          <th>Puntos</th>
          <th>Contraseña</th>
          <th>Fecha</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody>
        {% for usuario in usuarios %}
          <tr>
            <td>{{ usuario.0 }}</td>
            <td>{{ usuario.1 }}</td>
            <td>{{ usuario.2 }}</td>
            <td>{{ usuario.3 }}</td>
            <td>{{ usuario.4 }}</td>
            <td>{{ usuario.5 }}</td>
            <td>{{ usuario.6 }}</td>
            <td>
              <button class="edit-btn">✏️</button>
              <button class="delete-btn">🗑</button>
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="8">Sin usuarios.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </main>

  <script>
    function redirigirBitacora(url) {
      if (url) window.location.href = url;
    }
  </script>
</body>
</html>